<!-- Página de listagem de uma entidade -->

<!-- Título da página -->
<h1 class="text-center">Eventos</h1>

<p ng-show="mensagem.texto" class="{{mensagem.tipo}}">
  {{mensagem.texto}}
</p>

<!-- Filtro da tabela de resultados -->
<p>
  Buscar evento: <input ng-model="filtro" type="search" placeholder="parte do nome">
</p>

<!-- Tabela de resultados -->
<div class="table-responsive">
  <table class="table table-hover">
    <thead>
      <tr>
        <th>Evento</th>
        <th>Data</th>
        <th>Local</th>
        <th>Valor</th>
        <th>Quantidade</th>
        <th>Participantes</th>
        <th>Certificado?</th>
        <th>Tipo do Evento</th>
        <th>Lista Participantes</th>
        <th class="text-center">Ação</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="evento in eventos | filter:filtro">
        <td>
          <a ng-href="#!/evento/{{evento._id}}">{{evento.nome}}</a>
        </td>
        <td>{{evento.data | date :  "dd/MM/y" }}</td>
        <td>{{evento.local}}</td>
        <td>{{evento.valor}}</td>
        <td>{{evento.quantidade}}</td>
        <td>{{evento.quantidadedisponivel}}</td>
        <td>{{evento.certificado}}</td>
        <td>{{evento.tipoEvento}}</td>
        <td class="text-center">
          <button type="button" ng-click="selecionarEvento(evento)" class="btn btn-success" data-toggle="modal" data-target="#myModal">
            Participantes
          </button>
        </td>
        <td class="text-center">
          <button ng-click="remove(evento)" class="btn btn-warning">
            Remover
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Participantes</h4>
      </div>
      <div class="modal-body">
        <p ng-show="mensagemModal.texto" class="{{mensagemModal.tipo}}">
          {{mensagemModal.texto}}
        </p>
        
          <!-- Filtro da tabela de resultados -->
        <p>
          Buscar aluno: <input ng-model="filtroNome" type="search" placeholder="parte do nome">
        </p>

        <!-- Tabela de resultados -->
        <div class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <th>Nome</th>
                <th>E-mail</th>      
                <th class="text-center">Ação</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="usuario in eventoSelecionado.usuariosinscritos | filter:filtroNome">
                <td>{{usuario.nome}}</td>
                <td>{{usuario.login}}</td>
                              
                <td class="text-center">
                   <button ng-hide="participandoEvento(usuario)" ng-click="presente(usuario)" class="btn btn-warning">
                      Presente
                    </button>
                    <button ng-show="participandoEvento(usuario)" ng-click="removerPresenca(usuario)" class="btn btn-danger">
                      Remover 
                    </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Quantitativo da tabela de resultados -->
        <p ng-show="eventoSelecionado.usuariosinscritos.length">
          Alunos cadastrados: {{eventoSelecionado.usuariosinscritos.length}}
        </p>
        <p class="text-info" ng-hide="eventoSelecionado.usuariosinscritos.length">
          Não a alunos cadastrados.
        </p>



      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>
        </div>
    </div>
  </div>
</div>

<!-- Quantitativo da tabela de resultados -->
<p ng-show="eventos.length">
  Eventos cadastrados: {{eventos.length}}
</p>
<p class="text-info" ng-hide="eventos.length">
  Não a eventos cadastrados.
</p>

<!-- Painel dos botões de ação -->
<div class="panel panel-default">
  <div class="panel-body">
    <a ng-href="#!/evento" class="btn btn-primary">Novo</a>
  </div>
</div>
